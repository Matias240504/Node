<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sistema Legal - Dashboard Abogado</title>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/dashboardAbogado.css" />
    <style>
        /* Estilos adicionales para el dashboard del abogado */
        .user-info {
            margin-top: auto;
            padding-top: var(--spacing-md);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            position: relative;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: var(--spacing-sm);
        }
        
        .logout-btn {
            position: absolute;
            right: 0;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            font-size: 1.2rem;
            transition: color 0.3s;
        }
        
        .logout-btn:hover {
            color: white;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h1>Sistema Legal</h1>
            </div>
            
            <ul class="sidebar-menu">
                <li><a href="/abogado/dashboard" class="active"><i class="fas fa-home"></i> Inicio</a></li>
                <li><a href="/abogado/casos" id="casos-link"><i class="fas fa-gavel"></i> Casos Asignados</a></li>
                <li><a href="/abogado/clientes" id="clientes-link"><i class="fas fa-users"></i> Clientes</a></li>
                <li><a href="/abogado/audiencias" id="audiencias-link"><i class="fas fa-calendar-alt"></i> Audiencias</a></li>
                <li><a href="/abogado/documentos" id="documentos-link"><i class="fas fa-file-alt"></i> Documentos</a></li>
                <li><a href="/abogado/reportes" id="reportes-link"><i class="fas fa-chart-bar"></i> Reportes</a></li>
            </ul>
            
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div>
                    <div id="userName"><%= user.nombre %></div>
                    <small id="userRole">Abogado</small>
                </div>
                <button id="logoutBtn" class="logout-btn"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="page-header">
                <h2 class="page-title">Dashboard de Abogado</h2>
                <div>
                    <span id="currentDate"></span>
                </div>
            </div>
            
            <!-- Stats Cards -->
            <div class="cards-container">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Casos Activos</h3>
                        <div class="card-icon" style="background-color: var(--secondary-color);">
                            <i class="fas fa-briefcase"></i>
                        </div>
                    </div>
                    <div class="card-value">18</div>
                    <div class="card-description">3 casos nuevos esta semana</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Audiencias Pendientes</h3>
                        <div class="card-icon" style="background-color: var(--warning-color);">
                            <i class="fas fa-gavel"></i>
                        </div>
                    </div>
                    <div class="card-value">5</div>
                    <div class="card-description">Próxima: 18 de Mayo, 2025</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Documentos</h3>
                        <div class="card-icon" style="background-color: var(--success-color);">
                            <i class="fas fa-file-alt"></i>
                        </div>
                    </div>
                    <div class="card-value">87</div>
                    <div class="card-description">9 pendientes de revisión</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Clientes</h3>
                        <div class="card-icon" style="background-color: var(--dark-color);">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                    <div class="card-value">32</div>
                    <div class="card-description">2 nuevos este mes</div>
                </div>
            </div>
            
            <!-- Recent Cases -->
            <div class="section">
                <div class="section-header">
                    <h3 class="section-title">Casos Asignados</h3>
                    <button>Ver todos</button>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Caso #</th>
                                <th>Cliente</th>
                                <th>Tipo</th>
                                <th>Fecha de Inicio</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>C-2025-042</td>
                                <td>María González</td>
                                <td>Divorcio</td>
                                <td>10/05/2025</td>
                                <td><span class="status status-active">Activo</span></td>
                                <td><a href="#"><i class="fas fa-eye"></i></a></td>
                            </tr>
                            <tr>
                                <td>C-2025-041</td>
                                <td>Juan Pérez</td>
                                <td>Contrato Laboral</td>
                                <td>05/05/2025</td>
                                <td><span class="status status-pending">Pendiente</span></td>
                                <td><a href="#"><i class="fas fa-eye"></i></a></td>
                            </tr>
                            <tr>
                                <td>C-2025-039</td>
                                <td>Empresa XYZ</td>
                                <td>Propiedad Intelectual</td>
                                <td>28/04/2025</td>
                                <td><span class="status status-active">Activo</span></td>
                                <td><a href="#"><i class="fas fa-eye"></i></a></td>
                            </tr>
                            <tr>
                                <td>C-2025-036</td>
                                <td>Roberto Sánchez</td>
                                <td>Herencia</td>
                                <td>15/04/2025</td>
                                <td><span class="status status-closed">Cerrado</span></td>
                                <td><a href="#"><i class="fas fa-eye"></i></a></td>
                            </tr>
                            <tr>
                                <td>C-2025-035</td>
                                <td>Laura Martínez</td>
                                <td>Inmobiliario</td>
                                <td>10/04/2025</td>
                                <td><span class="status status-active">Activo</span></td>
                                <td><a href="#"><i class="fas fa-eye"></i></a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Próximas Audiencias -->
            <div class="section">
                <div class="section-header">
                    <h3 class="section-title">Próximas Audiencias</h3>
                    <button>Ver todas</button>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Caso #</th>
                                <th>Cliente</th>
                                <th>Tipo</th>
                                <th>Fecha</th>
                                <th>Hora</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>C-2025-041</td>
                                <td>Juan Pérez</td>
                                <td>Contrato Laboral</td>
                                <td>18/05/2025</td>
                                <td>10:00 AM</td>
                                <td><a href="#"><i class="fas fa-eye"></i></a></td>
                            </tr>
                            <tr>
                                <td>C-2025-042</td>
                                <td>María González</td>
                                <td>Divorcio</td>
                                <td>20/05/2025</td>
                                <td>11:30 AM</td>
                                <td><a href="#"><i class="fas fa-eye"></i></a></td>
                            </tr>
                            <tr>
                                <td>C-2025-039</td>
                                <td>Empresa XYZ</td>
                                <td>Propiedad Intelectual</td>
                                <td>22/05/2025</td>
                                <td>09:00 AM</td>
                                <td><a href="#"><i class="fas fa-eye"></i></a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Mostrar fecha actual
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const today = new Date();
        document.getElementById('currentDate').textContent = today.toLocaleDateString('es-ES', options);
        
        // Manejar el cierre de sesión
        document.getElementById('logoutBtn').addEventListener('click', function () {
            // Eliminar token y datos del usuario del localStorage
            localStorage.removeItem('token');
            localStorage.removeItem('userName');
            localStorage.removeItem('userRole');
            localStorage.removeItem('userId');
            
            // Eliminar la cookie de token
            document.cookie = 'token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT; secure; samesite=strict';
            
            // Redirigir al login
            window.location.href = '/auth/login';
        });
        
        document.addEventListener('DOMContentLoaded', function () {
            // Función para marcar el enlace activo en el menú lateral
            function marcarEnlaceActivo() {
                // Obtener la ruta actual
                const rutaActual = window.location.pathname;
                
                // Eliminar la clase 'active' de todos los enlaces
                document.querySelectorAll('.sidebar-menu a').forEach(enlace => {
                    enlace.classList.remove('active');
                });
                
                // Añadir la clase 'active' al enlace correspondiente a la ruta actual
                document.querySelectorAll('.sidebar-menu a').forEach(enlace => {
                    if (enlace.getAttribute('href') === rutaActual) {
                        enlace.classList.add('active');
                    }
                });
            }
            
            // Ejecutar la función al cargar la página
            marcarEnlaceActivo();
        });
    </script>
</body>
</html>
